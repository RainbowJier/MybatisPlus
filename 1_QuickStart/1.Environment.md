# Environment Preparation

- [Environment Preparation](#environment-preparation)
    * [1. ğŸ¥šIntroduction](#1---introduction)
        + [Target](#target)
    * [2. ğŸ³Create Database Table](#2---create-database-table)
        + [2.1 address table.](#21-address-table)
        + [2.2 user table.](#22-user-table)
    * [3. ğŸ³Create SpringBoot Application](#3---create-springboot-application)
        + [3.1 Configure Database in Profile](#31-configure-database-in-profile)

## 1. ğŸ¥šIntroduction

In daily development, you should be able to find that CRUD function code for single table is highly repetitive, and this
part of the code is often large and time-consuming to develop.

At present, one of the most used components in China is  [MybatisPlus](https://baomidou.com/).

### Target

1. Understand the basic usage of MybatisPlus
2. Conditional and update statement.
3. Annotation of MybatisPlus.
4. Handle enumeration and Json fields.
5. Pagination.

## 2. ğŸ³Create Database Table

```sql
-- å¯¼å‡º mp çš„æ•°æ®åº“ç»“æ„
CREATE DATABASE IF NOT EXISTS `mp` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */ /*!80016 DEFAULT ENCRYPTION = 'N' */;

USE `mp`;

```

### 2.1 address table.

```sql
-- å¯¼å‡º  è¡¨ mp.address ç»“æ„
CREATE TABLE IF NOT EXISTS `address`
(
    `id`         bigint NOT NULL AUTO_INCREMENT,
    `user_id`    bigint                                                  DEFAULT NULL COMMENT 'ç”¨æˆ·ID',
    `province`   varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci  DEFAULT NULL COMMENT 'çœ',
    `city`       varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci  DEFAULT NULL COMMENT 'å¸‚',
    `town`       varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci  DEFAULT NULL COMMENT 'å¿/åŒº',
    `mobile`     varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT 'æ‰‹æœº',
    `street`     varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT 'è¯¦ç»†åœ°å€',
    `contact`    varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT 'è”ç³»äºº',
    `is_default` bit(1)                                                  DEFAULT b'0' COMMENT 'æ˜¯å¦æ˜¯é»˜è®¤ 1é»˜è®¤ 0å¦',
    `notes`      varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT 'å¤‡æ³¨',
    `deleted`    bit(1)                                                  DEFAULT b'0' COMMENT 'é€»è¾‘åˆ é™¤',
    PRIMARY KEY (`id`) USING BTREE,
    KEY `user_id` (`user_id`) USING BTREE
) ENGINE = InnoDB
  AUTO_INCREMENT = 71
  DEFAULT CHARSET = utf8mb3
  ROW_FORMAT = COMPACT;

-- æ­£åœ¨å¯¼å‡ºè¡¨  mp.address çš„æ•°æ®ï¼š~11 rows (å¤§çº¦)

INSERT INTO `address` (`id`, `user_id`, `province`, `city`, `town`, `mobile`, `street`, `contact`, `is_default`,
                       `notes`, `deleted`)
VALUES (59, 2, 'åŒ—äº¬', 'åŒ—äº¬', 'æœé˜³åŒº', '13900112222', 'é‡‘ç‡•é¾™åŠå…¬æ¥¼', 'Rose', b'1', NULL, b'0'),
       (60, 1, 'åŒ—äº¬', 'åŒ—äº¬', 'æœé˜³åŒº', '13700221122', 'ä¿®æ­£å¤§å¦', 'Jack', b'0', NULL, b'0'),
       (61, 1, 'ä¸Šæµ·', 'ä¸Šæµ·', 'æµ¦ä¸œæ–°åŒº', '13301212233', 'èˆªå¤´é•‡èˆªå¤´è·¯', 'Jack', b'1', NULL, b'0'),
       (63, 2, 'å¹¿ä¸œ', 'ä½›å±±', 'æ°¸æ˜¥', '13301212233', 'æ°¸æ˜¥æ­¦é¦†', 'Rose', b'0', NULL, b'0'),
       (64, 3, 'æµ™æ±Ÿ', 'æ­å·', 'æ‹±å¢…åŒº', '13567809102', 'æµ™æ±Ÿå¤§å­¦', 'Hope', b'1', NULL, b'0'),
       (65, 3, 'æµ™æ±Ÿ', 'æ­å·', 'æ‹±å¢…åŒº', '13967589201', 'å·¦å²¸èŠ±å›­', 'Hope', b'0', NULL, b'0'),
       (66, 4, 'æ¹–åŒ—', 'æ­¦æ±‰', 'æ±‰å£', '13967519202', 'å¤©å¤©èŠ±å›­', 'Thomas', b'1', NULL, b'0'),
       (67, 3, 'æµ™æ±Ÿ', 'æ­å·', 'æ‹±å¢…åŒº', '13967589201', 'å·¦å²¸èŠ±å›­', 'Hopey', b'0', NULL, b'0'),
       (68, 4, 'æ¹–åŒ—', 'æ­¦æ±‰', 'æ±‰å£', '13967519202', 'å¤©å¤©èŠ±å›­', 'Thomas', b'1', NULL, b'0'),
       (69, 3, 'æµ™æ±Ÿ', 'æ­å·', 'æ‹±å¢…åŒº', '13967589201', 'å·¦å²¸èŠ±å›­', 'Hopey', b'0', NULL, b'0'),
       (70, 4, 'æ¹–åŒ—', 'æ­¦æ±‰', 'æ±‰å£', '13967519202', 'å¤©å¤©èŠ±å›­', 'Thomas', b'1', NULL, b'0');
```

### 2.2 user table.

```sql
-- å¯¼å‡º  è¡¨ mp.user ç»“æ„
CREATE TABLE `user`
(
    `id`          BIGINT(19)   NOT NULL AUTO_INCREMENT COMMENT 'ç”¨æˆ·id',
    `username`    VARCHAR(50)  NOT NULL COMMENT 'ç”¨æˆ·å' COLLATE 'utf8_general_ci',
    `password`    VARCHAR(128) NOT NULL COMMENT 'å¯†ç ' COLLATE 'utf8_general_ci',
    `phone`       VARCHAR(20)  NULL     DEFAULT NULL COMMENT 'æ³¨å†Œæ‰‹æœºå·' COLLATE 'utf8_general_ci',
    `info`        JSON         NOT NULL COMMENT 'è¯¦ç»†ä¿¡æ¯',
    `status`      INT(10)      NULL     DEFAULT '1' COMMENT 'ä½¿ç”¨çŠ¶æ€ï¼ˆ1æ­£å¸¸ 2å†»ç»“ï¼‰',
    `balance`     INT(10)      NULL     DEFAULT NULL COMMENT 'è´¦æˆ·ä½™é¢',
    `create_time` DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    `update_time` DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    PRIMARY KEY (`id`) USING BTREE,
    UNIQUE INDEX `username` (`username`) USING BTREE
)
    COMMENT ='ç”¨æˆ·è¡¨'
    COLLATE = 'utf8_general_ci'
    ENGINE = InnoDB
    ROW_FORMAT = COMPACT
    AUTO_INCREMENT = 5
;

-- æ­£åœ¨å¯¼å‡ºè¡¨  mp.user çš„æ•°æ®ï¼š~4 rows (å¤§çº¦)

INSERT INTO `user` (`id`, `username`, `password`, `phone`, `info`, `status`, `balance`, `create_time`, `update_time`)
VALUES (1, 'Jack', '123', '13900112224', '{"age": 20, "intro": "ä½›ç³»é’å¹´", "gender": "male"}', 1, 1600,
        '2023-05-19 20:50:21', '2023-06-19 20:50:21'),
       (2, 'Rose', '123', '13900112223', '{"age": 19, "intro": "é’æ¶©å°‘å¥³", "gender": "female"}', 1, 600,
        '2023-05-19 21:00:23', '2023-06-19 21:00:23'),
       (3, 'Hope', '123', '13900112222', '{"age": 25, "intro": "ä¸Šè¿›é’å¹´", "gender": "male"}', 1, 100000,
        '2023-06-19 22:37:44', '2023-06-19 22:37:44'),
       (4, 'Thomas', '123', '17701265258', '{"age": 29, "intro": "ä¼åœ°é­”", "gender": "male"}', 1, 800,
        '2023-06-19 23:44:45', '2023-06-19 23:44:45');

```

## 3. ğŸ³Create SpringBoot Application

![](./.images/1.Environment-5f0427b2bd124044b78192db70408216.png)

### 3.1 Configure Database in Profile

```yaml
spring:
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&serverTimezone=Asia/Shanghai
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: 112233
logging:
  level:
    com.example: debug
  pattern:
    dateformat: HH:mm:ss
```